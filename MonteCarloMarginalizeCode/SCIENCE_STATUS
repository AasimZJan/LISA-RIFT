
URGENT PRIORITIES

* Gain confidence in results

* Convergence and adaptation
    - convergence criteria
        - condition 1: Converged integral.  
                           Proposals exist (neff; normally-distributed sub-integrals) but need theory and code
        - condition 2: Converged extrinsic distributions (1d; 2d; ...).  Needs discussion

    - convergence theory with adaptation
        - must have robust theory (and demonstrations) showing when overconvergence 
          occurs and how to control it

* Combining extrinsic distributions from different masses
      - Option 1: Monte carlo approach : If *random* intrinsic, then join
      - What if masses are not random?

* Bugfixing
   - failure for high-snr MDC. Precision loss?
   - convergence problems at high SNR.  Use running adaptive exponent, set by instantaneous max L?

PROTOTYPING 

* Prototype-scale investigations
    - Array-based time marginalization                                            [Richard]
    - Vectorized parameter passing (phi,pis,d... as arrays)                   [Richard?] 

* Computational cost 
    - Long waveforms not a limit : runtime trend vs flow, seglen        [Richard?]


FEATURE REQUETS
  - Effective Fisher code reports area (in mc, eta) populated, and fraction lost to cutoffs
    Allows us to use m1,m2 samples to get total evidence via monte carlo integral
    (with m1,m2 prior)


TABLED UNTIL AFTER LARGE-SCALE RUNS

* Priors
 - sky prior     : reimplement ability to run with a skymap 
 - Distancce prior: Cutoff?  can we use *only* distance adaptation?
        - larger maximum distance

 - Time prior    : investigate safe inteval. Concrete examples with different injections (and gracedb)
                     : template (model/model, mass/mass) mismatches and timeshifts, re prior
                     : targeting smaller interval for time

 - Adaptive priors testing
       - Explore othe coordinates: phi+/- psi, inclination
       - Adaptation catastrophes ("overconvergence")
       - Adaptation in 2d? (distance-inclination; *skymap*)

* Sampling in mass, spin space
    - quasi-hierarchical: use autocorrelation scale (Fisher matrix) to reduce sampling density when we have very poor constraints.
      Go to denser sampling  when evidence high.

   - Implement match cutoff: e.g, 0.95 or 1-0.1(8/rho)^2.  Use 500 mass points. [Documentation: run dag!]

   - Implement aligned spin

* Data handling
    - Automate dag to select correct # of IFOs (e.g., from coinc) and PSDs

* Understand 
     -  inverse spec truncation: why we need an fmax

* Documentation
    - installation requirements 
    - document adaptive samplers on master [makefile targets]
    - implement, document adaptive sampler test suite on master
          - 6d gaussian

RECORD

* Priors 
   - distance prior [2013-12-11]  : uniform distance. Cutoff uniform across masses. 10*BNS distance (300 Mpc)
    - Sampling priors to "limit the worst case" runtime
         - uniform in iota [2013-12-17]
   - time prior changed to +/-50ms [2013-12-19]

* Sampler
      - adaptive sampler on master [2013-12-20]
      - Implement adaptation on master [ra, dec, d]
        Reproducible results for 2-ifo case, with and without adaptation. [2013-12-20]
        Available in zero_noise_mdc makefile targets

  
* Convergence
   - neff [2013-12-11] implementation fixed, mcsampler cleaned
   - Run dag + infrastructure, demonstrate fully-automated operation working (e.g., data selection, ...).
   - MDC and GraceDB runs: consistent integral values for wide range of m1,m2, IFOs, BNS masses [2013-12-31]

* Data handling:
    - Inverse spectrum truncation:
        - Implemented in lalsimutils IP class [2013-12-13]


* Likelihood
      - time marginalization v0:  [2013-12-16]

* Miscellaneous
   - data output truncation via --save-P, etc [2013-12-18]
   -  confirmed 2ifo works [2013-12-19]
   - default adaptation: 1Gpc distance ok; reproducible answers (no overconvergence) [2013-12-20]
   - GraceDB pipeline demo [2013-12-20]
   - error estimate report in xmlutils.py [2013-12-20]
   - fmax limit propagated, for now fmax 2000 [2013-12-20]
   - Report on P(<x_inj) for each parameter [2014-01-01]


